{% extends 'recommendations/base.html' %}
{% load static %}

{% block title %}Purchase Successful - SmartShop{% endblock %}

{% block content %}
<div style="background: white; padding: 50px; border-radius: 12px; margin: 50px auto; max-width: 800px; text-align: center; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
    <div style="font-size: 4em; margin-bottom: 20px;">âœ…</div>
    <h1 style="color: #27ae60; margin-bottom: 15px;">Purchase Successful!</h1>
    <p style="font-size: 1.2em; color: #666; margin-bottom: 30px;">
        Thank you for your purchase
    </p>

    <!-- Recent Purchases -->
    {% if recent_purchases %}
        <h2 style="margin-bottom: 20px; color: #2c3e50;">ğŸ›’ Your Recent Orders</h2>
        {% for purchase in recent_purchases %}
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 10px 0; text-align: left;">
            <p style="font-size: 1.3em; color: #2c3e50;"><strong>{{ purchase.product.name }}</strong></p>
            <p style="font-size: 1.2em; color: #27ae60; font-weight: bold;">â‚¹{{ purchase.product.price }}</p>
            <p style="font-size: 0.9em; color: #666;">Purchased on: {{ purchase.purchased_at|date:"M d, Y H:i" }}</p>
        </div>
        {% endfor %}
    {% else %}
        <p>No recent purchases found.</p>
    {% endif %}

    <!-- Action Buttons -->
    <div style="margin: 30px 0;">
        <a href="/" class="btn" style="margin: 0 10px;">Continue Shopping</a>
        <a href="{% url 'my_recommendations' %}" class="btn btn-success" style="margin: 10px 10px;">View Recommendations</a>
    </div>
</div>

<!-- Recommended Products -->
{% if recommendations %}
<div style="margin: 50px auto; max-width: 1000px;">
    <h2 class="section-title" style="margin-bottom: 20px;">ğŸ Customers Also Bought</h2>
    <div class="product-grid" style="display:grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 24px;">
        {% for rec in recommendations %}
        <div class="product-card" style="background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); text-align: center;">
            <div style="height: 150px; display:flex; align-items:center; justify-content:center; background: #f1f5f9; border-radius: 12px; margin-bottom: 15px;">
                {% if rec.image %}
                    <img src="{{ rec.image.url }}" alt="{{ rec.name }}" style="max-width: 100%; max-height: 100%; object-fit: contain;">
                {% else %}
                    <span style="font-size: 3em;">ğŸ›ï¸</span>
                {% endif %}
            </div>
            <span class="category" style="font-size: 0.8em; color: #94a3b8;">{{ rec.category.name }}</span>
            <h3 style="font-size: 1.1em; margin: 8px 0;">{{ rec.name }}</h3>
            <p style="font-size: 0.9em; color: #64748b;">{{ rec.description|truncatewords:12 }}</p>
            <div style="font-weight: 700; color: #27ae60; margin: 8px 0;">â‚¹{{ rec.price }}</div>
            <div style="color: #f59e0b; font-weight: 700;">â­ {{ rec.average_rating|floatformat:1 }}</div>
            <a href="{% url 'product_detail' rec.id %}" class="btn" style="margin-top: 10px; display: inline-block;">View Details â†’</a>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endblock %}

